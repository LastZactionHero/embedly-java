apply plugin: 'java'
apply plugin:com.smokejumperit.gradle.CukePlugin

buildscript {
    repositories {
        //mavenRepo urls:'http://repo.smokejumperit.com'
        flatDir name: 'local', dirs: 'plugins'
    }
    dependencies {
        //classpath 'com.smokejumperit:gradle-plugins:0.7.1-SNAPSHOT'
        classpath 'com.smokejumperit:gradle-plugins:0.7.2'
    }
}

repositories {
    mavenCentral()
}
dependencies {
    compile 'org.json:json:20090211'
    compile 'org.apache.httpcomponents:httpclient:4.0-beta2'
    compile 'commons-lang:commons-lang:2.5'
    testRuntime 'org.picocontainer:picocontainer:2.13.2'
    runtime 'org.json:json:20090211'
    runtime 'org.apache.httpcomponents:httpclient:4.0-beta2'
    runtime 'commons-lang:commons-lang:2.5'
}

task copySteps(type: Copy) {
    from 'src/test/jruby'
    into 'build/classes/test'
}

task libs(type: Sync) {
    from configurations.runtime
    into "$buildDir/libs"
}

task testLibs(type: Sync) {
    from configurations.testRuntime
    into "$buildDir/testLibs"
}

runFeatures.dependsOn << copySteps
